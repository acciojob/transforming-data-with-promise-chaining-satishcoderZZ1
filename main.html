<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <!-- do not change this code -->
    <input type="number" id="ip" />
    <button id="btn">Start</button>
    <div id="output"></div>
    <script type="text/javascript" src="./script.js">
		document.getElementById("btn").onclick = function(){
			const inputVal = parseFloat(document.getElementById("ip").value);
			const outputDiv = document.getElementById("output");

			outputDiv.innerText = "";

			if(isNaN(inputVal)){
				outputDiv.innerText = "Please enter a valid number";
				return;
			}
			function delayedTransform(value, delay, operation, messagePrefix = "Result:"){
				return new Promise((resolve)=>{
					setTimeout(()=>{
						const newValue = operation(value);
						outputDiv.innerText = `${messagePrefix} ${newValue}`;
						resolve(newValue);
					}, delay);
				})
			}

			new Promise((resolve)=>{
				setTimeout(()=>{
					outputDiv.innerText = `Result : ${inputVal}`;
					resolve(inputVal);
				}, 2000);
			})
			.then((num)=>delayedTransform(num, 1000, (n) => n*2))
			.then ((num)=>delayedTransform(num, 1000, (n)=> n-3))
			.then ((num)=>delayedTransform(num, 1000, (n)=> n/2))
			.then ((num)=>delayedTransform(num, 1000, (n)=> n+10, "Final Result:"));
		};
	</script>
  </body>
</html>
